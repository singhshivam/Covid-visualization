{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/react-bootstrap/es/utils/createChainedFunction.js","../node_modules/react-bootstrap/es/SafeAnchor.js","../node_modules/react-bootstrap/es/Button.js","Dashboard/RaceChart.js"],"names":["_assertThisInitialized","self","ReferenceError","__webpack_require__","d","__webpack_exports__","utils_createChainedFunction","_len","arguments","length","funcs","Array","_key","filter","f","reduce","acc","Error","_len2","args","_key2","apply","this","isTrivialHref","href","trim","SafeAnchor_SafeAnchor","_React$Component","SafeAnchor","props","context","_this","call","handleClick","bind","Object","esm_assertThisInitialized","handleKeyDown","inheritsLoose","_proto","prototype","event","_this$props","disabled","onClick","preventDefault","stopPropagation","key","render","_this$props2","Component","as","onKeyDown","innerRef","objectWithoutPropertiesLoose","role","tabIndex","ref","react_default","a","createElement","esm_extends","defaultProps","es_SafeAnchor","Button_Button","Button","bsPrefix","variant","size","active","className","block","type","classes","classnames_default","es_Button","ThemeProvider","prefix","forwardRefAs","RaceChart","classCallCheck","possibleConstructorReturn","getPrototypeOf","margin","top","right","bottom","left","width","height","state","data","leftPadding","colorMap","fetchCSV","assertThisInitialized","prepareData","drawChart","drawXAxis","drawBars","restartGraph","_this2","d3","then","res","_this2$state","forEach","Country","Math","random","svg","append","attr","concat","setState","accumulator","keys","k","date","Date","isNaN","newEntry","value","geoName","push","i","undefined","sort","b","el","t","xScale","_this$state","axis","select","empty","transition","selectAll","delay","yScale","_this3","_this$state2","barsG","bars","yAccessor","exit","remove","enter","merge","xAccessor","bandwidth","style","_this4","_this$state3","years","map","lastYear","startIndex","startYear","selectedData","removeGeoAreasWithNoData","sortData","slice","range","domain","rangeRound","padding","geoAreas","text","drawYAxis","interval","duration","stop","Row","Col","md","xl","Card","Body","React"],"mappings":"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","file":"static/js/8.89b0c1ee.chunk.js","sourcesContent":["export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","/**\n * Safe chained function\n *\n * Will only create a new function if needed,\n * otherwise will pass back existing functions or null.\n *\n * @param {function} functions to chain\n * @returns {function|null}\n */\nfunction createChainedFunction() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  return funcs.filter(function (f) {\n    return f != null;\n  }).reduce(function (acc, f) {\n    if (typeof f !== 'function') {\n      throw new Error('Invalid Argument Type, must only provide functions, undefined, or null.');\n    }\n\n    if (acc === null) return f;\n    return function chainedFunction() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      acc.apply(this, args);\n      f.apply(this, args);\n    };\n  }, null);\n}\n\nexport default createChainedFunction;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport React from 'react';\nimport createChainedFunction from './utils/createChainedFunction';\nvar defaultProps = {\n  as: 'a'\n};\n\nfunction isTrivialHref(href) {\n  return !href || href.trim() === '#';\n}\n/**\n * There are situations due to browser quirks or Bootstrap CSS where\n * an anchor tag is needed, when semantically a button tag is the\n * better choice. SafeAnchor ensures that when an anchor is used like a\n * button its accessible. It also emulates input `disabled` behavior for\n * links, which is usually desirable for Buttons, NavItems, DropdownItems, etc.\n */\n\n\nvar SafeAnchor =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(SafeAnchor, _React$Component);\n\n  function SafeAnchor(props, context) {\n    var _this;\n\n    _this = _React$Component.call(this, props, context) || this;\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleKeyDown = _this.handleKeyDown.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  var _proto = SafeAnchor.prototype;\n\n  _proto.handleClick = function handleClick(event) {\n    var _this$props = this.props,\n        disabled = _this$props.disabled,\n        href = _this$props.href,\n        onClick = _this$props.onClick;\n\n    if (disabled || isTrivialHref(href)) {\n      event.preventDefault();\n    }\n\n    if (disabled) {\n      event.stopPropagation();\n      return;\n    }\n\n    if (onClick) {\n      onClick(event);\n    }\n  };\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    if (event.key === ' ') {\n      event.preventDefault();\n      this.handleClick(event);\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props2 = this.props,\n        Component = _this$props2.as,\n        disabled = _this$props2.disabled,\n        onKeyDown = _this$props2.onKeyDown,\n        innerRef = _this$props2.innerRef,\n        props = _objectWithoutPropertiesLoose(_this$props2, [\"as\", \"disabled\", \"onKeyDown\", \"innerRef\"]);\n\n    if (isTrivialHref(props.href)) {\n      props.role = props.role || 'button'; // we want to make sure there is a href attribute on the node\n      // otherwise, the cursor incorrectly styled (except with role='button')\n\n      props.href = props.href || '#';\n    }\n\n    if (disabled) {\n      props.tabIndex = -1;\n      props['aria-disabled'] = true;\n    }\n\n    if (innerRef) props.ref = innerRef;\n    return React.createElement(Component, _extends({}, props, {\n      onClick: this.handleClick,\n      onKeyDown: createChainedFunction(this.handleKeyDown, onKeyDown)\n    }));\n  };\n\n  return SafeAnchor;\n}(React.Component);\n\nSafeAnchor.defaultProps = defaultProps;\nexport default SafeAnchor;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { createBootstrapComponent } from './ThemeProvider';\nimport SafeAnchor from './SafeAnchor';\n\nvar Button =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Button, _React$Component);\n\n  function Button() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = Button.prototype;\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        bsPrefix = _this$props.bsPrefix,\n        variant = _this$props.variant,\n        size = _this$props.size,\n        active = _this$props.active,\n        className = _this$props.className,\n        block = _this$props.block,\n        type = _this$props.type,\n        as = _this$props.as,\n        innerRef = _this$props.innerRef,\n        props = _objectWithoutPropertiesLoose(_this$props, [\"bsPrefix\", \"variant\", \"size\", \"active\", \"className\", \"block\", \"type\", \"as\", \"innerRef\"]);\n\n    var classes = classNames(className, bsPrefix, active && 'active', bsPrefix + \"-\" + variant, block && bsPrefix + \"-block\", size && bsPrefix + \"-\" + size);\n\n    if (props.href) {\n      return React.createElement(SafeAnchor, _extends({}, props, {\n        as: as,\n        innerRef: innerRef,\n        className: classNames(classes, props.disabled && 'disabled')\n      }));\n    }\n\n    var Component = as || 'button';\n    if (innerRef) props.ref = innerRef;\n    return React.createElement(Component, _extends({}, props, {\n      type: type,\n      className: classes\n    }));\n  };\n\n  return Button;\n}(React.Component);\n\nButton.defaultProps = {\n  variant: 'primary',\n  active: false,\n  disabled: false,\n  type: 'button'\n};\nexport default createBootstrapComponent(Button, {\n  prefix: 'btn',\n  forwardRefAs: 'innerRef'\n});","import React from 'react';\nimport { Row, Col, Card, Button } from 'react-bootstrap';\nimport * as d3 from 'd3'\n\n\nclass RaceChart extends React.Component {\n    constructor(props) {\n        super(props)\n\n        const margin = { top: 20, right: 30, bottom: 40, left: 260 }\n        const width = 960 - margin.left - margin.right\n        const height = 400 - margin.top - margin.bottom\n        const leftPadding = 5\n\n        this.state = {\n            data: {},\n            margin: margin,\n            width: width,\n            height: height,\n            leftPadding: leftPadding,\n            colorMap: {}\n        }\n        this.fetchCSV = this.fetchCSV.bind(this)\n        this.prepareData = this.prepareData.bind(this)\n        this.drawChart = this.drawChart.bind(this)\n        this.drawXAxis = this.drawXAxis.bind(this)\n        this.drawBars = this.drawBars.bind(this)\n        this.restartGraph = this.restartGraph.bind(this)\n    }\n\n    componentDidMount() {\n        this.fetchCSV()\n    }\n\n    fetchCSV() {\n        d3.csv(\"/animated.csv\")\n            .then(res => {\n                const { height, width, margin } = this.state\n                let data = this.prepareData(res)\n                let colorMap = {}\n                res.forEach((d) => {\n                    colorMap[d.Country] = d3.hsl(Math.random() * 360, 0.75, 0.75)\n                })\n                const svg = d3.select('.chart').append('svg')\n                    .attr('width', width + margin.left + margin.right)\n                    .attr('height', height + margin.top + margin.bottom)\n                    .append('g')\n                    .attr('transform', `translate(${margin.left},${margin.top})`)\n                this.setState({ data: data, colorMap: colorMap, svg: svg })\n                this.drawChart()\n            })\n    }\n\n    prepareData(data) {\n        let isDate = (date) => {\n            return (new Date(date) !== \"Invalid Date\" && !isNaN(new Date(date))) ? true : false\n        }\n        return data.reduce((accumulator, d) => {\n            Object.keys(d).forEach((k) => {\n                if (!isDate(k)) { return; }\n                let value = +d[k]\n                const newEntry = {\n                    value,\n                    geoName: d.Country,\n                }\n                if (accumulator[k]) {\n                    accumulator[k].push(newEntry)\n                } else {\n                    accumulator[k] = [newEntry]\n                }\n            })\n            return accumulator\n        }, {})\n    }\n\n    removeGeoAreasWithNoData(data) {\n        return data.filter(d => d.value)\n    }\n\n    xAccessor(d) {\n        return d.value\n    }\n\n    yAccessor(d) {\n        return d.geoName\n    }\n\n    delay(d, i) {\n        return i * 5\n    }\n\n    sortData(data = []) {\n        return data.sort((a, b) => b.value - a.value)\n    }\n\n    drawXAxis(el, data, t, xScale) {\n        const { leftPadding, height } = this.state\n        let axis = el.select('.axis--x')\n        if (axis.empty()) {\n            axis = el.append('g')\n                .attr('class', 'axis axis--x')\n                .attr('transform', `translate(${leftPadding},${height})`)\n        }\n        axis.transition(t)\n            .call(d3.axisBottom(xScale))\n            .selectAll('g')\n            .delay(this.delay)\n    }\n\n    drawYAxis(el, data, t, yScale) {\n        let axis = el.select('.axis--y')\n        if (axis.empty()) {\n            axis = el.append('g')\n                .attr('class', 'axis axis--y')\n        }\n\n        axis.transition(t)\n            .call(d3.axisLeft(yScale))\n            .selectAll('g')\n            .delay(this.delay)\n    }\n\n    drawBars(el, data, t, xScale, yScale) {\n        const { leftPadding, colorMap } = this.state\n        let barsG = el.select('.bars-g')\n        if (barsG.empty()) {\n            barsG = el.append('g')\n                .attr('class', 'bars-g')\n        }\n        const bars = barsG\n            .selectAll('.bar')\n            .data(data, this.yAccessor)\n        bars.exit()\n            .remove()\n        bars.enter()\n            .append('rect')\n            .attr('class', 'bar')\n            .attr('x', leftPadding)\n            .merge(bars).transition(t)\n            .attr('y', d => yScale(this.yAccessor(d)))\n            .attr('width', d => xScale(this.xAccessor(d)))\n            .attr('height', yScale.bandwidth())\n            .style('fill', d => colorMap[d.geoName])\n            .delay(this.delay)\n    }\n\n\n    drawChart() {\n        const { data, height, width, margin, svg } = this.state\n        if (!svg) { return }\n        const years = Object.keys(data).map(d => d)\n        const lastYear = years[years.length - 1]\n\n        svg.selectAll(\"*\").remove()\n\n        let startIndex = 0\n        let startYear = years[0]\n        let selectedData = this.removeGeoAreasWithNoData(this.sortData(data[startYear])).slice(0, 10)\n        let xScale = d3.scaleLinear()\n            .range([0, width])\n            .domain([0, d3.max(selectedData.map(d => d.value))])\n\n        let yScale = d3.scaleBand()\n            .domain(d3.range(11))\n            .rangeRound([0, height])\n            .padding(0.1)\n        let geoAreas = selectedData.map(this.yAccessor)\n\n        d3.select('.year').text(startYear.slice(0, 10))\n\n        yScale.domain(geoAreas)\n        this.drawXAxis(svg, selectedData, undefined, xScale)\n        this.drawYAxis(svg, selectedData, undefined, yScale)\n        this.drawBars(svg, selectedData, undefined, xScale, yScale)\n        const interval = d3.interval(() => {\n            const t = d3.transition().duration(400)\n\n            startIndex += 1\n            selectedData = this.removeGeoAreasWithNoData(this.sortData(data[years[startIndex]])).slice(0, 10)\n\n            d3.select('.year').text(years[startIndex].slice(0, 10))\n\n            xScale.domain([0, d3.max(selectedData.map(d => d.value))])\n            yScale.domain(selectedData.map(this.yAccessor))\n            this.drawXAxis(svg, selectedData, t, xScale)\n            this.drawYAxis(svg, selectedData, t, yScale)\n            this.drawBars(svg, selectedData, t, xScale, yScale)\n\n            if (years[startIndex] === lastYear) {\n                interval.stop()\n            }\n        }, 500)\n        this.setState({ interval: interval })\n\n    }\n\n    restartGraph() {\n        const { interval } = this.state\n        if (interval) {\n            interval.stop()\n            this.drawChart()\n        }\n    }\n\n    render() {\n        return (\n            <Row>\n                <Col md={12} xl={12}>\n                    <Card>\n                        <Card.Body>\n                            <h6 className='mb-4'>\n                                What is the total number of confirmed cases?\n                            </h6>\n                            <Row>\n                                <Col md={12} xl={12}>\n                                    <Col md={8} xl={8}>\n                                        <h4 className=\"chart-title\">Date: <span className=\"year\"></span></h4>\n                                    </Col>\n                                    <Col md={4} xl={4}>\n                                        <Button variant=\"outline-primary\" onClick={this.restartGraph}>Restart</Button>{' '}\n                                    </Col>\n                                </Col>\n                            </Row>\n                            <div className=\"col-sm\">\n                            </div>\n                            <div className=\"wrapper\">\n                                <div className=\"chart\"></div>\n                                <p className=\"source\">Data source: The World Bank</p>\n                            </div>\n\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row>\n        )\n    }\n}\n\nexport default RaceChart;"],"sourceRoot":""}
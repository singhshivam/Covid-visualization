(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{104:function(e,t,a){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}a.d(t,"a",function(){return r})},262:function(e,t,a){"use strict";a.r(t);var r=a(7),n=a(8),i=a(10),s=a(9),c=a(23),o=a(11),l=a(0),u=a.n(l),d=a(244),h=a(245),f=a(261),p=a(50),v=a(54),m=a(52),b=a(55),y=a.n(b),w=a(57),g=a(104);var k=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(function(e){return null!=e}).reduce(function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];e.apply(this,r),t.apply(this,r)}},null)};function x(e){return!e||"#"===e.trim()}var A=function(e){function t(t,a){var r;return(r=e.call(this,t,a)||this).handleClick=r.handleClick.bind(Object(g.a)(Object(g.a)(r))),r.handleKeyDown=r.handleKeyDown.bind(Object(g.a)(Object(g.a)(r))),r}Object(m.a)(t,e);var a=t.prototype;return a.handleClick=function(e){var t=this.props,a=t.disabled,r=t.href,n=t.onClick;(a||x(r))&&e.preventDefault(),a?e.stopPropagation():n&&n(e)},a.handleKeyDown=function(e){" "===e.key&&(e.preventDefault(),this.handleClick(e))},a.render=function(){var e=this.props,t=e.as,a=e.disabled,r=e.onKeyDown,n=e.innerRef,i=Object(v.a)(e,["as","disabled","onKeyDown","innerRef"]);return x(i.href)&&(i.role=i.role||"button",i.href=i.href||"#"),a&&(i.tabIndex=-1,i["aria-disabled"]=!0),n&&(i.ref=n),u.a.createElement(t,Object(p.a)({},i,{onClick:this.handleClick,onKeyDown:k(this.handleKeyDown,r)}))},t}(u.a.Component);A.defaultProps={as:"a"};var j=A,D=function(e){function t(){return e.apply(this,arguments)||this}return Object(m.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.bsPrefix,a=e.variant,r=e.size,n=e.active,i=e.className,s=e.block,c=e.type,o=e.as,l=e.innerRef,d=Object(v.a)(e,["bsPrefix","variant","size","active","className","block","type","as","innerRef"]),h=y()(i,t,n&&"active",t+"-"+a,s&&t+"-block",r&&t+"-"+r);if(d.href)return u.a.createElement(j,Object(p.a)({},d,{as:o,innerRef:l,className:y()(h,d.disabled&&"disabled")}));var f=o||"button";return l&&(d.ref=l),u.a.createElement(f,Object(p.a)({},d,{type:c,className:h}))},t}(u.a.Component);D.defaultProps={variant:"primary",active:!1,disabled:!1,type:"button"};var O=Object(w.a)(D,{prefix:"btn",forwardRefAs:"innerRef"}),E=a(69),C=function(e){function t(e){var a;Object(r.a)(this,t),a=Object(i.a)(this,Object(s.a)(t).call(this,e));var n={top:20,right:30,bottom:40,left:260},o=960-n.left-n.right,l=400-n.top-n.bottom;return a.state={data:{},margin:n,width:o,height:l,leftPadding:5,colorMap:{}},a.fetchCSV=a.fetchCSV.bind(Object(c.a)(a)),a.prepareData=a.prepareData.bind(Object(c.a)(a)),a.drawChart=a.drawChart.bind(Object(c.a)(a)),a.drawXAxis=a.drawXAxis.bind(Object(c.a)(a)),a.drawBars=a.drawBars.bind(Object(c.a)(a)),a.restartGraph=a.restartGraph.bind(Object(c.a)(a)),a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.fetchCSV()}},{key:"fetchCSV",value:function(){var e=this;E.c("".concat(window.appURL,"/animated.csv")).then(function(t){var a=e.state,r=a.height,n=a.width,i=a.margin,s=e.prepareData(t),c={};t.forEach(function(e){c[e.Country]=E.g(360*Math.random(),.75,.75)});var o=E.v(".chart").append("svg").attr("width",n+i.left+i.right).attr("height",r+i.top+i.bottom).append("g").attr("transform","translate(".concat(i.left,",").concat(i.top,")"));e.setState({data:s,colorMap:c,svg:o}),e.drawChart()})}},{key:"prepareData",value:function(e){return e.reduce(function(e,t){return Object.keys(t).forEach(function(a){if(r=a,"Invalid Date"!==new Date(r)&&!isNaN(new Date(r))){var r,n={value:+t[a],geoName:t.Country};e[a]?e[a].push(n):e[a]=[n]}}),e},{})}},{key:"removeGeoAreasWithNoData",value:function(e){return e.filter(function(e){return e.value})}},{key:"xAccessor",value:function(e){return e.value}},{key:"yAccessor",value:function(e){return e.geoName}},{key:"delay",value:function(e,t){return 5*t}},{key:"sortData",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).sort(function(e,t){return t.value-e.value})}},{key:"drawXAxis",value:function(e,t,a,r){var n=this.state,i=n.leftPadding,s=n.height,c=e.select(".axis--x");c.empty()&&(c=e.append("g").attr("class","axis axis--x").attr("transform","translate(".concat(i,",").concat(s,")"))),c.transition(a).call(E.a(r)).selectAll("g").delay(this.delay)}},{key:"drawYAxis",value:function(e,t,a,r){var n=e.select(".axis--y");n.empty()&&(n=e.append("g").attr("class","axis axis--y")),n.transition(a).call(E.b(r)).selectAll("g").delay(this.delay)}},{key:"drawBars",value:function(e,t,a,r,n){var i=this,s=this.state,c=s.leftPadding,o=s.colorMap,l=e.select(".bars-g");l.empty()&&(l=e.append("g").attr("class","bars-g"));var u=l.selectAll(".bar").data(t,this.yAccessor);u.exit().remove(),u.enter().append("rect").attr("class","bar").attr("x",c).merge(u).transition(a).attr("y",function(e){return n(i.yAccessor(e))}).attr("width",function(e){return r(i.xAccessor(e))}).attr("height",n.bandwidth()).style("fill",function(e){return o[e.geoName]}).delay(this.delay)}},{key:"drawChart",value:function(){var e=this,t=this.state,a=t.data,r=t.height,n=t.width,i=(t.margin,t.svg);if(i){var s=Object.keys(a).map(function(e){return e}),c=s[s.length-1];i.selectAll("*").remove();var o=0,l=s[0],u=this.removeGeoAreasWithNoData(this.sortData(a[l])).slice(0,10),d=E.p().range([0,n]).domain([0,E.k(u.map(function(e){return e.value}))]),h=E.o().domain(E.n(11)).rangeRound([0,r]).padding(.1),f=u.map(this.yAccessor);E.v(".year").text(l.slice(0,10)),h.domain(f),this.drawXAxis(i,u,void 0,d),this.drawYAxis(i,u,void 0,h),this.drawBars(i,u,void 0,d,h);var p=E.h(function(){var t=E.z().duration(400);o+=1,u=e.removeGeoAreasWithNoData(e.sortData(a[s[o]])).slice(0,10),E.v(".year").text(s[o].slice(0,10)),d.domain([0,E.k(u.map(function(e){return e.value}))]),h.domain(u.map(e.yAccessor)),e.drawXAxis(i,u,t,d),e.drawYAxis(i,u,t,h),e.drawBars(i,u,t,d,h),s[o]===c&&p.stop()},500);this.setState({interval:p})}}},{key:"restartGraph",value:function(){var e=this.state.interval;e&&(e.stop(),this.drawChart())}},{key:"render",value:function(){return u.a.createElement(d.a,null,u.a.createElement(h.a,{md:12,xl:12},u.a.createElement(f.a,null,u.a.createElement(f.a.Body,null,u.a.createElement("h6",{className:"mb-4"},"What is the total number of confirmed cases?"),u.a.createElement(d.a,null,u.a.createElement(h.a,{md:12,xl:12},u.a.createElement(h.a,{md:8,xl:8},u.a.createElement("h4",{className:"chart-title"},"Date: ",u.a.createElement("span",{className:"year"}))),u.a.createElement(h.a,{md:4,xl:4},u.a.createElement(O,{variant:"outline-primary",onClick:this.restartGraph},"Restart")," "))),u.a.createElement("div",{className:"col-sm"}),u.a.createElement("div",{className:"wrapper"},u.a.createElement("div",{className:"chart"}),u.a.createElement("p",{className:"source"},"Data source: The World Bank"))))))}}]),t}(u.a.Component);t.default=C}}]);
//# sourceMappingURL=10.9cdda693.chunk.js.map